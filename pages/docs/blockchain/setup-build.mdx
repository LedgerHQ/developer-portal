import { Callout } from 'nextra/components'

# Requirements and installation

## Introduction

All the JavaScript code related to the Ledger Live applications is in the `ledger-live` monorepository. The work to integrate a Blockchain in Ledger Live will all happen in this monorepository.

Ledger Live Common (`./libs/ledger-live-common`) is the shared core library used by Ledger Live Desktop and Mobile, that also includes a CLI for testing purpose or for using Ledger Live features directly from a terminal (in a limited way).

This library is built upon a pretty standard ES6 + Typescript stack and relies on a bunch of [ledgerjs](https://github.com/LedgerHQ/docs/tree/develop/libs/ledgerjs) packages, [RxJS 6.x](https://github.com/ReactiveX/rxjs/tree/6.x), [bignumber.js](https://github.com/MikeMcl/bignumber.js) and [React](https://github.com/facebook/react/) + [Redux](https://github.com/reduxjs/redux) for some front-end utilities and hooks.

It is designed to have very generic models and mechanics (for currencies, accounts, storage, synchronisation, events...) that also facilitates new blockchain integrations through flexibility.
All integrated coins are implemented in their own package in the `libs` directory, following the naming convention. To be fully integrated, a `libs/ledger-live-common/src/families` dedicated folder needs to contain a few "glue" files - that can be shared by multiple crypto-assets that use the same implementation (i.e. Bitcoin-like coins share the same `bitcoin` family).

**This document only concerns new blockchain integrations using Typescript - we will use an imaginary coin named `MyCoin` as a walkthrough.**

## Setup

### Requirements

- [Node.js@18.x.x](https://nodejs.org/)
- [PnPm@8.x.x](https://pnpm.io/)
- Python 2.7 or 3.5+
- A C/C++ toolchain (see node-gyp documentation)

### Development tools (used or required)

- [eslint](https://github.com/eslint/eslint) - ensure it works in your IDE ([vscode plugin](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint))
- [prettier](https://github.com/prettier/prettier) - through an eslint-plugin
- [typescript](https://www.typescriptlang.org/) - ensure it works fine with your IDE

### Hardware prerequisites

- A physical device (Ledger Nano S, S Plus, X or a Stax)
- <i>MyCoin</i> app installed on device

### Installation

- Fork and clone the `ledger-live` repository [https://github.com/LedgerHQ/ledger-live](https://github.com/LedgerHQ/ledger-live)
- `cd ledger-live`
- Install with `pnpm i`

## Structure

Your whole implementation of <i>MyCoin</i> must reside in a `mycoin` folder in `libs/ledger-live-common/src/families/` with the exception of some changes to apply in shared code.

Here is a typical family folder structure (TS integration):

```plaintext copy
./libs
â”œâ”€â”€ coin-mycoin/src
â”‚   â”œâ”€â”€ api
â”‚   â”‚   â”œâ”€â”€ cache.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ bridge
â”‚   â”‚   â””â”€â”€ js.ts
â”‚   â”œâ”€â”€ account.ts
â”‚   â”œâ”€â”€ bridge.integration.test.ts
â”‚   â”œâ”€â”€ buildTransaction.ts
â”‚   â”œâ”€â”€ cli-transaction.ts
â”‚   â”œâ”€â”€ deviceTransactionConfig.ts
â”‚   â”œâ”€â”€ errors.ts
â”‚   â”œâ”€â”€ hw-getAddress.ts
â”‚   â”œâ”€â”€ js-broadcast.ts
â”‚   â”œâ”€â”€ js-createTransaction.ts
â”‚   â”œâ”€â”€ js-estimateMaxSpendable.ts
â”‚   â”œâ”€â”€ js-getFeesForTransaction.ts
â”‚   â”œâ”€â”€ js-getTransactionStatus.ts
â”‚   â”œâ”€â”€ js-prepareTransaction.ts
â”‚   â”œâ”€â”€ js-signOperation.ts
â”‚   â”œâ”€â”€ js-synchronization.ts
â”‚   â”œâ”€â”€ logic.ts
â”‚   â”œâ”€â”€ serialization.ts
â”‚   â”œâ”€â”€ signer.ts
â”‚   â”œâ”€â”€ specs.ts
â”‚   â”œâ”€â”€ speculos-deviceActions.ts
â”‚   â”œâ”€â”€ transaction.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ ledger-live-common/src/families/mycoin
â”‚   â”œâ”€â”€ bridge.integration.test.ts
â”‚   â”œâ”€â”€ logic.ts
â”‚   â”œâ”€â”€ react.ts
â”‚   â”œâ”€â”€ setup.ts
â”‚   â””â”€â”€ types.ts
â””â”€â”€ ledgerjs/packages/hw-app-mycoin/src
    â””â”€â”€ MyCoin.ts
```

<Callout type="info" emoji="ðŸ‘‰">
    You can refer to existing implementations to complete given examples, like <a href='https://github.com/LedgerHQ/docs/tree/develop/libs/ledger-live-common/src/families/polkadot'>Polkadot integration</a>.
</Callout>

#### Coin-module
 * `src/api` directory: Contains all the logic to send requests to the explorer.
 * `src/bridge/js.ts` file: Entry point of Ledger Live integration of the coin-module. This file lists `BridgeCurrency` and `BridgeAccount` implementation.
 * `src/hw-getAddress.ts` file: Logic on how to interact with device-app to retrieve addresses.
 * `src/js-*` files: Split of `BridgeCurrency` and `BridgeAccount` logic in dedicated files.
 * `src/signer.ts` file: Interface definition of the ledger device-app related to this coin.
 * `src/specs.ts` file: Definition of tests to be run on the bot.

#### Ledger live-common
 * `src/logic.ts`: Lists coin specific business logic.
 * `src/react.ts`: Defines and lists coin specfic react hooks for UI.
 * `src/setup.ts`: Glue file for coin integration.
 * `src/types.ts`: Lists coin specific types.

#### LedgerJS
All files related to communication with the device-app.
