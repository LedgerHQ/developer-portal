import { Callout } from "nextra/components";
import Image from 'next/image'
import Glossary from '/components/features/tooltip-glossary'


# ERC-7730: How to implement clear signing

<Callout type="info" emoji="ℹ️">

This implementation is currently for EVM chains only. Stay tuned for other protocols.

</Callout>

The <Glossary word="clear signing"></Glossary> standard relies on a registry of smart contract metadata files. These files describe the operations and fields of the smart contract. This page outlines the process for adding your metadata to the registry.

## Adding to the registry

1. Fork the official registry
1. Add a metadata file
1. Preview your changes
1. Submit a pull request (PR)
1. Get approval and merge

### Fork the registry

The official registry is a public repo at [https://github.com/LedgerHQ/clear-signing-erc7730-registry](https://github.com/LedgerHQ/clear-signing-erc7730-registry)

### Add a metadata file

Describe your smart contract data following the ERC-7730 standard:

- See examples in [/registry](https://github.com/LedgerHQ/clear-signing-erc7730-registry/blob/master/registry)

- See JSON schema and file spec in [/specs/erc7730-v1.schema.json](https://github.com/LedgerHQ/clear-signing-erc7730-registry/blob/master/specs/erc7730-v1.schema.json) and [/specs/erc-7730.md](https://github.com/LedgerHQ/clear-signing-erc7730-registry/blob/master/specs/erc-7730.md)

### Preview your changes

Run the web app locally to preview your changes.

See the README in the repo for details: https://github.com/LedgerHQ/clear-signing-erc7730-registry/tree/master/developer-preview#readme

### Submit a pull Request

The [PR requirements](https://github.com/LedgerHQ/clear-signing-erc7730-registry/blob/master/README.md) are in the README of the registry.

Automated checks will run and give you feedback on your metadata file.

Approvers on the repo will also review and comment to help your PR through.

Once approved and merged the metadata will join the registry 🎉

### Seeing clear signed operations on Ledger devices

Changes to the registry will be picked up by Ledger's generic parser and ultimately, be made available to Ledger devices.

<div style={{ paddingTop: "1em", width: "90%" }} className="center">
  <figure>
    <img
      src="/clear-signing/preview-example-poap.png"
      alt="Preview example with POAP operation"
    />
  </figure>
</div>

The preview tool allows you to see how the data will be displayed on Ledger Flex and Ledger Stax.

<Callout type="info" emoji="💡">
  If you would like add to the preview modes get in touch – open a PR or create
  an issue on the repo
</Callout>

### Clear signing on other wallets and devices

At Ledger we are keen for the community to contribute to the registry and for all wallet manufacturers and developers to use the standard. We believe that this will help to improve the security of the ecosystem for everyone and make it easier for more people to use smart contracts.

## Special cases

- For EIP-712 messages follow [this documentation](./eip712)
- For for ERC-721, ERC-1155 and ERC-20 follow [this documentation](./nft)
- If applicable, [add your token](../ledger-live/accounts/integration/tokens/evm-chains-tokens) in Ledger Live.
- Some special cases may require the development of an [Ethereum plugin](../device-app/getting-started). The Ledger team will guide you through this process if required.

## Wallets

All you have to do is use the latest version of the [LedgerJS Ethereum transport library](https://github.com/LedgerHQ/ledger-live/tree/b2163a6eaafd46390d4a14bad8e62fcc10454c05/libs/ledgerjs/packages/hw-app-eth). It has been updated for the new standard. For more information on how to use the LedgerJS libraries read [this documentation](../device-interaction/getting-started).

## Watch the "Request for Comment Session"

To get an insight about our process and plan for the future of clear signing, we recommend you watching the "Request for Comment Session". You can read [the slides](https://www.keepandshare.com/doc13/view.php?id=32202&da=y).

<br />

<iframe
  width="100%"
  height="315"
  src="https://www.youtube-nocookie.com//embed/-O7aX6vUvs8?si=ypUZmsQyyGPYcNn7"
  title="YouTube video player"
  frameBorder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowFullScreen
></iframe>

## What's next?

- Publication of an <Glossary word="open source"></Glossary> JSON edition tool to write the json description and display the information that the user will see on their devices,
- Decentralization of the peer <Glossary word="review process"></Glossary>,
- Generalization of the JSON standard to the <Glossary word="Web3"></Glossary> ecosystem,
- Extension of this process to other protocols.

Stay tuned for further updates and evolutions on this topic as we continue to improve and expand our security measures, ensuring the highest protection for our users.

Want to know more? Join the conversation on [the Ethereum Magicians Forum](https://ethereum-magicians.org/t/eip-7730-proposal-for-a-clear-signing-standard-format-for-wallets/20403).
