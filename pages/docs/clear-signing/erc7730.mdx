import { Callout } from "nextra/components";
import Image from "next/image"

# dApps Clear Signing implementation with ERC-7730

## Overview 

<Callout type="info" emoji="ℹ️">
  Currently, this implementation is supported for EVM chains only. Stay tuned for updates on other protocols!
</Callout>

<Callout type="info" emoji="ℹ️">
  This process replaces the former EIP-712 messages process.
</Callout>

<Callout type="warning" emoji="⚠️">
  Some special cases may require the development of an [Ethereum plugin](../device-app/getting-started). The Ledger team will guide you through this process if required.
</Callout>

This guide will walk you through the process of implementing clear signing for ERC-7730 on EVM chains. This implementation uses a registry of smart contract metadata files.

After your changes are merged, the Ledger **generic parser** will integrate them, making them available on Ledger devices such as Ledger Flex and Ledger Stax. The "generic parser" serves as the middle-layer deployed on the Ledger infrastructure to read and parse your JSON files.

This preview example shows how clear signing operations will be displayed:

<div style={{ paddingTop: "1em", width: "90%" }} className="center">
  <figure>
    <Image src="/clear-signing/preview-example-poap.png" 
    alt="Preview example with POAP operation"
    width={800} height={600} 
    />
  </figure>
</div>

## How to Add Your Metadata to the Registry

To add your metadata to the registry, follow these steps:

1. Fork the official registry repository.
2. Add a metadata file describing your smart contract.
3. Preview your changes locally.
4. Submit a pull request (PR).
5. Await approval and merge your changes.

### Step 1: Fork the Official Registry

- The official registry is hosted on GitHub: [ERC-7730 Registry](https://github.com/LedgerHQ/clear-signing-erc7730-registry).

### Step 2: Create a Metadata File

The Metadata file contains the description of your smart contract data according to the ERC-7730 standard.

- Generate this file with the [ERC7730 Json builder](https://clear-signing-erc7730-builder.vercel.app/). The tool is still in Alpha mode, if you encounter any error, please provide feedback using [this form](https://tally.so/r/mObbWM).

Or, to manually write it:
- Refer to example files available in the [registry directory](https://github.com/LedgerHQ/clear-signing-erc7730-registry/blob/master/registry).
- Follow the JSON schema and specification in the [specs/erc7730-v1.schema.json](https://github.com/LedgerHQ/clear-signing-erc7730-registry/blob/master/specs/erc7730-v1.schema.json) and [specs/erc-7730.md](https://github.com/LedgerHQ/clear-signing-erc7730-registry/blob/master/specs/erc-7730.md).

### Step 3: Preview Your Changes

Preview how the Clear Signing looks on device with the [ERC7730 Json builder](https://clear-signing-erc7730-builder.vercel.app/)


### Step 4: Submit a Pull Request

- Review the [PR requirements](https://github.com/LedgerHQ/clear-signing-erc7730-registry/blob/master/README.md) detailed in the README.
- Automated checks will run to provide feedback on your files.
- Repo approvers will review your submission and provide comments to assist the process.
- Once approved, your metadata will be merged into the registry.

**Success!** You have added your metadata to the registry 🎉

## Generic Parser Status

<Callout type="warning" emoji="⚠️">
  **Generic Parser Not Yet Ready:** Please be aware that the Ledger generic parser is currently undergoing development and is not yet operational. This means that even after your metadata is merged, it won't immediately be available on Ledger devices. We appreciate your patience and will notify you once the parser is fully functional and capable of integrating metadata with Ledger devices.
</Callout>

