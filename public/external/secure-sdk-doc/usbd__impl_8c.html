<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embedded SDK: lib_stusb_impl/usbd_impl.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Embedded SDK
   </div>
   <div id="projectbrief">Embedded SDK</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43d46591ae519a25212fe5b6787e9c75.html">lib_stusb_impl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">usbd_impl.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file provides the HID core functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;os.h&quot;</code><br />
<code>#include &quot;os_io_usb.h&quot;</code><br />
<code>#include &quot;usbd_hid.h&quot;</code><br />
<code>#include &quot;<a class="el" href="usbd__hid__impl_8h_source.html">usbd_hid_impl.h</a>&quot;</code><br />
<code>#include &quot;usbd_ctlreq.h&quot;</code><br />
<code>#include &quot;usbd_core.h&quot;</code><br />
<code>#include &quot;<a class="el" href="usbd__conf_8h_source.html">usbd_conf.h</a>&quot;</code><br />
<code>#include &quot;usbd_def.h&quot;</code><br />
<code>#include &quot;os_io_seproxyhal.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for usbd_impl.c:</div>
<div class="dyncontent">
<div class="center"><img src="usbd__impl_8c__incl.png" border="0" usemap="#alib__stusb__impl_2usbd__impl_8c" alt=""/></div>
</div>
</div>
<p><a href="usbd__impl_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga070dd542d4d914e86fdf103fa5fdd72f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Variables.html#ga070dd542d4d914e86fdf103fa5fdd72f">USBD_LANGID_STRING</a>&#160;&#160;&#160;0x409</td></tr>
<tr class="separator:ga070dd542d4d914e86fdf103fa5fdd72f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac5251397ce2246b546b472cd802e6d62"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Variables.html#gac5251397ce2246b546b472cd802e6d62">USBD_VID</a>&#160;&#160;&#160;0x2C97</td></tr>
<tr class="separator:gac5251397ce2246b546b472cd802e6d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaedb1101a7b7b1be9349051d972e8b51c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Variables.html#gaedb1101a7b7b1be9349051d972e8b51c">USBD_INTERFACE_FS_STRING</a>&#160;&#160;&#160;USBD_PRODUCT_FS_STRING</td></tr>
<tr class="separator:gaedb1101a7b7b1be9349051d972e8b51c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2e4446fa70cda1fdfc88b2d85725cee4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Variables.html#ga2e4446fa70cda1fdfc88b2d85725cee4">USBD_CONFIGURATION_FS_STRING</a>&#160;&#160;&#160;USBD_PRODUCT_FS_STRING</td></tr>
<tr class="separator:ga2e4446fa70cda1fdfc88b2d85725cee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c82ad484151a90d36afdc5c7b55e5f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Variables.html#ga4c82ad484151a90d36afdc5c7b55e5f6">ARRAY_U2LE</a>(l)&#160;&#160;&#160;(l)&amp;0xFF, (l)&gt;&gt;8</td></tr>
<tr class="separator:ga4c82ad484151a90d36afdc5c7b55e5f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa61aa2ab109ec981c423ec99f5fa7a10"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Variables.html#gaa61aa2ab109ec981c423ec99f5fa7a10">CFG_HDR_LEN</a>&#160;&#160;&#160;(0x9)</td></tr>
<tr class="separator:gaa61aa2ab109ec981c423ec99f5fa7a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67c654b189849cec818afe4cce8727d2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Variables.html#ga67c654b189849cec818afe4cce8727d2">CFG_HIDGEN_LEN</a>&#160;&#160;&#160;(0x9+0x9+0x7+0x7)</td></tr>
<tr class="separator:ga67c654b189849cec818afe4cce8727d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62c4a174312d0d7d9bdbb05190056a62"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Variables.html#ga62c4a174312d0d7d9bdbb05190056a62">CFG_IO_U2F_LEN</a>&#160;&#160;&#160;(0x9+0x9+0x7+0x7)</td></tr>
<tr class="separator:ga62c4a174312d0d7d9bdbb05190056a62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3761b0290607fd5549093856c3e10b56"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Variables.html#ga3761b0290607fd5549093856c3e10b56">CFG_USB_CCID_LEN</a>&#160;&#160;&#160;(0x9+0x36+0x7+0x7)</td></tr>
<tr class="separator:ga3761b0290607fd5549093856c3e10b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6a4430a034aa5417423d532e71af019a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Variables.html#ga6a4430a034aa5417423d532e71af019a">CFG_WEBUSB_LEN</a>&#160;&#160;&#160;(0x9+0x7+0x7)</td></tr>
<tr class="separator:ga6a4430a034aa5417423d532e71af019a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4c9a71f6261f9890e187a0320cf9b07b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="usbd__conf_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Variables.html#ga4c9a71f6261f9890e187a0320cf9b07b">USBD_HID_GetHidDescriptor_impl</a> (<a class="el" href="usbd__conf_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> *len)</td></tr>
<tr class="separator:ga4c9a71f6261f9890e187a0320cf9b07b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3cda9a45740889fb3ab8ce7150c878a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="usbd__conf_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Variables.html#ga3cda9a45740889fb3ab8ce7150c878a9">USBD_HID_GetReportDescriptor_impl</a> (<a class="el" href="usbd__conf_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> *len)</td></tr>
<tr class="separator:ga3cda9a45740889fb3ab8ce7150c878a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82c8a1e1aee54c79e7a7803af1f26f42"><td class="memItemLeft" align="right" valign="top"><a class="el" href="usbd__conf_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID.html#ga82c8a1e1aee54c79e7a7803af1f26f42">USBD_HID_DataIn_impl</a> (USBD_HandleTypeDef *pdev, <a class="el" href="usbd__conf_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> epnum)</td></tr>
<tr class="memdesc:ga82c8a1e1aee54c79e7a7803af1f26f42"><td class="mdescLeft">&#160;</td><td class="mdescRight">USBD_HID_DataOut handle data OUT Stage.  <br /></td></tr>
<tr class="separator:ga82c8a1e1aee54c79e7a7803af1f26f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4efcd25e66921d88b8ebdeeff3c45214"><td class="memItemLeft" align="right" valign="top"><a class="el" href="usbd__conf_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID.html#ga4efcd25e66921d88b8ebdeeff3c45214">USBD_HID_DataOut_impl</a> (USBD_HandleTypeDef *pdev, <a class="el" href="usbd__conf_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> epnum, <a class="el" href="usbd__conf_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *buffer, apdu_buffer_t *apdu_buf)</td></tr>
<tr class="separator:ga4efcd25e66921d88b8ebdeeff3c45214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8899c6ac0f033620a06a663f9c6db6a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Functions.html#ga8899c6ac0f033620a06a663f9c6db6a4">USB_power</a> (unsigned char enabled)</td></tr>
<tr class="separator:ga8899c6ac0f033620a06a663f9c6db6a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga0aad195cab55ac717055b59815c739c0"><td class="memItemLeft" align="right" valign="top">USBD_DescriptorsTypeDef const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__USBD__HID__Private__Functions.html#ga0aad195cab55ac717055b59815c739c0">HID_Desc</a></td></tr>
<tr class="separator:ga0aad195cab55ac717055b59815c739c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file provides the HID core functions. </p>
<dl class="section author"><dt>Author</dt><dd>MCD Application Team </dd></dl>
<dl class="section version"><dt>Version</dt><dd>V2.2.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>13-June-2014 </dd></dl>
<pre class="fragment">*
*          ===================================================================
*                                HID Class  Description
*          ===================================================================
*           This module manages the HID class V1.11 following the "Device Class Definition
*           for Human Interface Devices (HID) Version 1.11 Jun 27, 2001".
*           This driver implements the following aspects of the specification:
*             - The Boot Interface Subclass
*             - Usage Page : Generic Desktop
*             - Usage : Vendor
*             - Collection : Application
*
* @note     In HS mode and when the DMA is used, all variables and data structures
*           dealing with the DMA during the transaction process should be 32-bit aligned.
*
*
*  </pre><dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<h2><center>&copy; COPYRIGHT 2014 STMicroelectronics</center></h2>
<p>Licensed under MCD-ST Liberty SW License Agreement V2, (the "License"); You may not use this file except in compliance with the License. You may obtain a copy of the License at: </p><pre class="fragment">   http://www.st.com/software_license_agreement_liberty_v2
</pre><p> Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. </p>

<p class="definition">Definition in file <a class="el" href="usbd__impl_8c_source.html">usbd_impl.c</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
